[include mainsail.cfg]
[include gcode_macro.cfg]
[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_1E003A000C51323433323831-if00

[virtual_sdcard]
path: /home/printer/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[printer]
kinematics:corexy
max_velocity: 600
max_accel: 20000
max_z_velocity: 10
max_z_accel: 500
square_corner_velocity: 8

[force_move]
enable_force_move : True

[stepper_x]
step_pin:PD4
dir_pin:PD3
enable_pin:!PD6
microsteps:16
rotation_distance: 39.88
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin:tmc2240_stepper_x:virtual_endstop
position_min: -5.5
position_endstop: -5.5
position_max:245
homing_speed:50
homing_retract_dist:0
homing_positive_dir:False

[tmc2240 stepper_x]
cs_pin: PD5
spi_software_sclk_pin: PE14
spi_software_mosi_pin: PE13
spi_software_miso_pin: PE15
run_current: 1.07
interpolate: true
#stealthchop_threshold: 0
#coolstep_threshold: 15
diag0_pin: !PC1
driver_SGT: 1

[stepper_y]
step_pin:PA15
dir_pin:PA8
enable_pin:!PD1
microsteps: 16
rotation_distance: 39.88
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin:tmc2240_stepper_y:virtual_endstop
position_min: -4.5
position_endstop: -4.5
position_max: 258
homing_speed:50
homing_retract_dist:0
homing_positive_dir:False

[tmc2240 stepper_y]
cs_pin: PD0
spi_software_sclk_pin: PE14
spi_software_mosi_pin: PE13
spi_software_miso_pin: PE15
run_current: 1.07
interpolate: true
#stealthchop_threshold: 0
#coolstep_threshold: 15
diag0_pin: !PC3
driver_SGT: 1

[stepper_z]
step_pin:PE2
dir_pin:PE3
enable_pin:!PE0
microsteps: 128
rotation_distance: 4
full_steps_per_rotation: 200
endstop_pin: PC0
position_endstop: 0
position_max: 248
position_min: -4
homing_speed: 8
second_homing_speed: 10
homing_retract_dist: 5.0
homing_positive_dir:false

[tmc2209 stepper_z]
uart_pin:PE1
run_current: 0.6
interpolate: True
stealthchop_threshold: 9999999999

[stepper_z1]
step_pin:PD15
dir_pin:PD14
enable_pin:!PC7
microsteps: 128
rotation_distance: 4
full_steps_per_rotation: 200

[tmc2209 stepper_z1]
uart_pin:PC6
run_current: 0.6
interpolate: True
stealthchop_threshold: 9999999999

[heater_bed]
heater_pin: PD7
sensor_type:NTC 100K MGB18-104F39050L32
sensor_pin:PA1
max_power: 1.0
control = pid
pid_Kp=63.418
pid_Ki=1.342
pid_Kd=749.125
min_temp: -60
max_temp: 125
